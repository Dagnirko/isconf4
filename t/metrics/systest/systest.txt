n4h1> cd /tmp/isconftest
n4h1> COVERAGE=1; export COVERAGE
n4h2> cd /tmp/isconftest
n4h2> COVERAGE=1; export COVERAGE
n4h3> cd /tmp/isconftest
n4h3> COVERAGE=1; export COVERAGE
n4h4> cd /tmp/isconftest
n4h4> COVERAGE=1; export COVERAGE
n4h1> hostname 
n4h2> hostname 
n4h3> hostname 
n4h4> hostname 
a.hostname n4h1
b.hostname n4h2
c.hostname n4h3
d.hostname n4h4
n4h1> /tmp/isconftest/t/isconf stop
n4h1> rm -rf /tmp/var
n4h1> rm -rf /tmp/labtest
n4h2> /tmp/isconftest/t/isconf stop
n4h2> rm -rf /tmp/var
n4h2> rm -rf /tmp/labtest
n4h3> /tmp/isconftest/t/isconf stop
n4h3> rm -rf /tmp/var
n4h3> rm -rf /tmp/labtest
n4h4> /tmp/isconftest/t/isconf stop
n4h4> rm -rf /tmp/var
n4h4> rm -rf /tmp/labtest
n4h1> /tmp/isconftest/t/isconf start
n4h1> /tmp/isconftest/t/isconf up
n4h2> /tmp/isconftest/t/isconf start
n4h2> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf start
n4h3> /tmp/isconftest/t/isconf up
n4h4> /tmp/isconftest/t/isconf start
n4h4> /tmp/isconftest/t/isconf up
n4h1> mkdir -p /tmp/labtest
# scp /tmp/@31688.0 root@n4h1:/tmp/labtest/1
n4h1> cat /tmp/labtest/1
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/1
n4h1> /tmp/isconftest/t/isconf snap foo
n4h1> /tmp/isconftest/t/isconf -m 'test' lock
n4h1> /tmp/isconftest/t/isconf exec mkdir -p /tmp/labtest
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/1
# scp /tmp/@31688.1 root@n4h1:/tmp/labtest/2
# COVERAGE=1 ssh root@n4h1 chmod +x /tmp/labtest/2
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/2
n4h1> /tmp/isconftest/t/isconf exec /tmp/labtest/2 'hey there world!'
n4h1> cat /tmp/labtest/2.out
n4h2> /tmp/isconftest/t/isconf up
n4h2> test -f /tmp/labtest/1
n4h2> test -f /tmp/labtest/2.out
n4h1> /tmp/isconftest/t/isconf ci
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/1
n4h2> cat /tmp/labtest/2.out
n4h2> grep message: /tmp/var/isfs/cache/example.com/volume/generic/journal | grep test | wc -l
n4h2> /tmp/isconftest/t/isconf stop
n4h2> rm -rf /tmp/var
n4h2> rm -rf /tmp/labtest
n4h2> /tmp/isconftest/t/isconf start
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/2.out
n4h1> /tmp/isconftest/t/isconf -m 'test multiple ci' lock
# scp /tmp/@31688.2 root@n4h1:/tmp/labtest/multiple
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/multiple
n4h1> /tmp/isconftest/t/isconf ci
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/multiple
n4h3> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf fork branch2
n4h3> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf -m 'test fork' lock
# scp /tmp/@31688.3 root@n4h3:/tmp/labtest/fork
n4h3> /tmp/isconftest/t/isconf snap /tmp/labtest/fork
n4h3> /tmp/isconftest/t/isconf ci
n4h4> /tmp/isconftest/t/isconf migrate branch2
n4h4> /tmp/isconftest/t/isconf up
n4h4> cat /tmp/labtest/multiple
n4h4> cat /tmp/labtest/fork
n4h1> /tmp/isconftest/t/isconf up
n4h1> test -f /tmp/labtest/fork
n4h2> /tmp/isconftest/t/isconf up
n4h2> test -f /tmp/labtest/fork
# COVERAGE=1 ssh root@n4h1 /tmp/isconftest/t/isconf restart
n4h1> cd /tmp/isconftest
n4h1> COVERAGE=1; export COVERAGE
n4h2> cd /tmp/isconftest
n4h2> COVERAGE=1; export COVERAGE
n4h3> cd /tmp/isconftest
n4h3> COVERAGE=1; export COVERAGE
n4h4> cd /tmp/isconftest
n4h4> COVERAGE=1; export COVERAGE
n4h1> hostname 
n4h2> hostname 
n4h3> hostname 
n4h4> hostname 
a.hostname n4h1
b.hostname n4h2
c.hostname n4h3
d.hostname n4h4
n4h1> /tmp/isconftest/t/isconf stop
n4h1> rm -rf /tmp/var
n4h1> rm -rf /tmp/labtest
n4h2> /tmp/isconftest/t/isconf stop
n4h2> rm -rf /tmp/var
n4h2> rm -rf /tmp/labtest
n4h3> /tmp/isconftest/t/isconf stop
n4h3> rm -rf /tmp/var
n4h3> rm -rf /tmp/labtest
n4h4> /tmp/isconftest/t/isconf stop
n4h4> rm -rf /tmp/var
n4h4> rm -rf /tmp/labtest
n4h1> /tmp/isconftest/t/isconf start
n4h1> /tmp/isconftest/t/isconf up
n4h2> /tmp/isconftest/t/isconf start
n4h2> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf start
n4h3> /tmp/isconftest/t/isconf up
n4h4> /tmp/isconftest/t/isconf start
n4h4> /tmp/isconftest/t/isconf up
n4h1> mkdir -p /tmp/labtest
# scp /tmp/@31688.0 root@n4h1:/tmp/labtest/1
n4h1> cat /tmp/labtest/1
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/1
n4h1> /tmp/isconftest/t/isconf snap foo
n4h1> /tmp/isconftest/t/isconf -m 'test' lock
n4h1> /tmp/isconftest/t/isconf exec mkdir -p /tmp/labtest
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/1
# scp /tmp/@31688.1 root@n4h1:/tmp/labtest/2
# COVERAGE=1 ssh root@n4h1 chmod +x /tmp/labtest/2
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/2
n4h1> /tmp/isconftest/t/isconf exec /tmp/labtest/2 'hey there world!'
n4h1> cat /tmp/labtest/2.out
n4h2> /tmp/isconftest/t/isconf up
n4h2> test -f /tmp/labtest/1
n4h2> test -f /tmp/labtest/2.out
n4h1> /tmp/isconftest/t/isconf ci
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/1
n4h2> cat /tmp/labtest/2.out
n4h2> grep message: /tmp/var/isfs/cache/example.com/volume/generic/journal | grep test | wc -l
n4h2> /tmp/isconftest/t/isconf stop
n4h2> rm -rf /tmp/var
n4h2> rm -rf /tmp/labtest
n4h2> /tmp/isconftest/t/isconf start
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/2.out
n4h1> /tmp/isconftest/t/isconf -m 'test multiple ci' lock
# scp /tmp/@31688.2 root@n4h1:/tmp/labtest/multiple
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/multiple
n4h1> /tmp/isconftest/t/isconf ci
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/multiple
n4h3> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf fork branch2
n4h3> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf -m 'test fork' lock
# scp /tmp/@31688.3 root@n4h3:/tmp/labtest/fork
n4h3> /tmp/isconftest/t/isconf snap /tmp/labtest/fork
n4h3> /tmp/isconftest/t/isconf ci
n4h4> /tmp/isconftest/t/isconf migrate branch2
n4h4> /tmp/isconftest/t/isconf up
n4h4> cat /tmp/labtest/multiple
n4h4> cat /tmp/labtest/fork
n4h1> /tmp/isconftest/t/isconf up
n4h1> test -f /tmp/labtest/fork
n4h2> /tmp/isconftest/t/isconf up
n4h2> test -f /tmp/labtest/fork
# COVERAGE=1 ssh root@n4h2 /tmp/isconftest/t/isconf restart
n4h1> cd /tmp/isconftest
n4h1> COVERAGE=1; export COVERAGE
n4h2> cd /tmp/isconftest
n4h2> COVERAGE=1; export COVERAGE
n4h3> cd /tmp/isconftest
n4h3> COVERAGE=1; export COVERAGE
n4h4> cd /tmp/isconftest
n4h4> COVERAGE=1; export COVERAGE
n4h1> hostname 
n4h2> hostname 
n4h3> hostname 
n4h4> hostname 
a.hostname n4h1
b.hostname n4h2
c.hostname n4h3
d.hostname n4h4
n4h1> /tmp/isconftest/t/isconf stop
n4h1> rm -rf /tmp/var
n4h1> rm -rf /tmp/labtest
n4h2> /tmp/isconftest/t/isconf stop
n4h2> rm -rf /tmp/var
n4h2> rm -rf /tmp/labtest
n4h3> /tmp/isconftest/t/isconf stop
n4h3> rm -rf /tmp/var
n4h3> rm -rf /tmp/labtest
n4h4> /tmp/isconftest/t/isconf stop
n4h4> rm -rf /tmp/var
n4h4> rm -rf /tmp/labtest
n4h1> /tmp/isconftest/t/isconf start
n4h1> /tmp/isconftest/t/isconf up
n4h2> /tmp/isconftest/t/isconf start
n4h2> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf start
n4h3> /tmp/isconftest/t/isconf up
n4h4> /tmp/isconftest/t/isconf start
n4h4> /tmp/isconftest/t/isconf up
n4h1> mkdir -p /tmp/labtest
# scp /tmp/@31688.0 root@n4h1:/tmp/labtest/1
n4h1> cat /tmp/labtest/1
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/1
n4h1> /tmp/isconftest/t/isconf snap foo
n4h1> /tmp/isconftest/t/isconf -m 'test' lock
n4h1> /tmp/isconftest/t/isconf exec mkdir -p /tmp/labtest
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/1
# scp /tmp/@31688.1 root@n4h1:/tmp/labtest/2
# COVERAGE=1 ssh root@n4h1 chmod +x /tmp/labtest/2
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/2
n4h1> /tmp/isconftest/t/isconf exec /tmp/labtest/2 'hey there world!'
n4h1> cat /tmp/labtest/2.out
n4h2> /tmp/isconftest/t/isconf up
n4h2> test -f /tmp/labtest/1
n4h2> test -f /tmp/labtest/2.out
n4h1> /tmp/isconftest/t/isconf ci
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/1
n4h2> cat /tmp/labtest/2.out
n4h2> grep message: /tmp/var/isfs/cache/example.com/volume/generic/journal | grep test | wc -l
n4h2> /tmp/isconftest/t/isconf stop
n4h2> rm -rf /tmp/var
n4h2> rm -rf /tmp/labtest
n4h2> /tmp/isconftest/t/isconf start
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/2.out
n4h1> /tmp/isconftest/t/isconf -m 'test multiple ci' lock
# scp /tmp/@31688.2 root@n4h1:/tmp/labtest/multiple
n4h1> /tmp/isconftest/t/isconf snap /tmp/labtest/multiple
n4h1> /tmp/isconftest/t/isconf ci
n4h2> /tmp/isconftest/t/isconf up
n4h2> cat /tmp/labtest/multiple
n4h3> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf fork branch2
n4h3> /tmp/isconftest/t/isconf up
n4h3> /tmp/isconftest/t/isconf -m 'test fork' lock
# scp /tmp/@31688.3 root@n4h3:/tmp/labtest/fork
n4h3> /tmp/isconftest/t/isconf snap /tmp/labtest/fork
n4h3> /tmp/isconftest/t/isconf ci
n4h4> /tmp/isconftest/t/isconf migrate branch2
n4h4> /tmp/isconftest/t/isconf up
n4h4> cat /tmp/labtest/multiple
n4h4> cat /tmp/labtest/fork
n4h1> /tmp/isconftest/t/isconf up
n4h1> test -f /tmp/labtest/fork
n4h2> /tmp/isconftest/t/isconf up
n4h2> test -f /tmp/labtest/fork
n4h1> /tmp/isconftest/t/isconf up
n4h2> /tmp/isconftest/t/isconf up

83 tests: 0 failed, 83 passed (100%)
